<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>AINize + Gradio: Easiest Automatic ML model deployment | Sehyun Choi</title> <meta name="author" content="Sehyun Choi"> <meta name="description" content="Serving a simple demo page (along with REST API) for you ML model on the web."> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/syncdoth/jekyll-pygments-themes@master/onedark.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A7%91%F0%9F%8F%BB%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="syncdoth.github.io/blog/2022/ainize_gradio/"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Sehyun </span>Choi</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/courseworks/">courseworks</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">AINize + Gradio: Easiest Automatic ML model deployment</h1> <p class="post-meta">June 24, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/machine-learning"> <i class="fas fa-hashtag fa-sm"></i> machine-learning</a>   <a href="/blog/tag/deployment"> <i class="fas fa-hashtag fa-sm"></i> deployment</a>   <a href="/blog/tag/docker"> <i class="fas fa-hashtag fa-sm"></i> docker</a>     ·   <a href="/blog/category/tutorial"> <i class="fas fa-tag fa-sm"></i> Tutorial</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Machine Learning is great. You can train models to do a lot of fancy things, like analyze the text for you, or generate images from descriptions. However, in their raw forms, what they do is simply take numbers and return numbers, which are uninterpretable to naked human eyes. Most of the time, to show off your model, you would need some demo page that can interactively take input and generate output from and to users with ease. This has been very difficult before: you would need to</p> <ol> <li>Build inference server (REST or grpc)</li> <li>Deploy to Backend Server</li> <li>Build a frontend page and connect it to the inference server</li> </ol> <p>Beling AI developers/researchers, these works might have been too much of an extra work. However, I stumpled upon two awesome projects that make these procedures much easier!</p> <h2 id="what-are-they">What are they?</h2> <h3 id="gradio">Gradio</h3> <p><a href="https://gradio.app" rel="external nofollow noopener" target="_blank">Gradio</a> is an open source project that generates a simple frontend to demonstrate your ML model wrapped in a inference function. It also sets up a REST API that can be called from http requests. This is used in <a href="https://huggingface.co/models" rel="external nofollow noopener" target="_blank">huggingface hub</a>.</p> <h3 id="ainize">AINize</h3> <p><a href="https://ainize.ai/" rel="external nofollow noopener" target="_blank">AINize</a> is a free service that automatically deploys the connected github repository based on the repository’s dockerfile. You can use this to serve anything, really! (it doesn’t even have to be AI or ML related: just anything that can be dockerized)</p> <h2 id="step-1-setup-gradio-service">Step 1. Setup Gradio Service</h2> <p>A sample Gradio service interface has this syntax:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td> <td class="code"><pre><span class="kn">import</span> <span class="n">gradio</span> <span class="k">as</span> <span class="n">gr</span>

<span class="n">iface</span> <span class="o">=</span> <span class="n">gr</span><span class="p">.</span><span class="nc">Interface</span><span class="p">(</span>
           <span class="n">fn</span><span class="o">=</span><span class="n">model_infer_fn</span><span class="p">,</span>
           <span class="n">inputs</span><span class="o">=</span><span class="p">[</span>
               <span class="n">gr</span><span class="p">.</span><span class="nc">Textbox</span><span class="p">(</span><span class="n">lines</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="sh">"</span><span class="s">text here...</span><span class="sh">"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">sentence</span><span class="sh">'</span><span class="p">),</span>
               <span class="n">gr</span><span class="p">.</span><span class="nc">Slider</span><span class="p">(</span><span class="n">minimum</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                <span class="n">maximum</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                                <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                <span class="n">default</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                                <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">threshold</span><span class="sh">'</span><span class="p">),</span>
           <span class="p">],</span>
           <span class="n">outputs</span><span class="o">=</span><span class="p">[</span>
               <span class="n">gr</span><span class="p">.</span><span class="nc">Textbox</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="sh">"</span><span class="s">auto</span><span class="sh">"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">prediction</span><span class="sh">"</span><span class="p">),</span>
           <span class="p">],</span>
           <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Demo</span><span class="sh">'</span><span class="p">,</span>
           <span class="n">theme</span><span class="o">=</span><span class="sh">'</span><span class="s">peach</span><span class="sh">'</span><span class="p">,</span>
        <span class="p">)</span>
 <span class="n">iface</span><span class="p">.</span><span class="nf">launch</span><span class="p">()</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>This creates an interface with:</p> <ul> <li>2 inputs: 1 string input and 1 slider input (float values)</li> <li>1 output panel: a textbox</li> </ul> <p><em>You can take a look at different options for input and outputs in the</em> <em><a href="https://gradio.app/docs/#components" rel="external nofollow noopener" target="_blank">official documentation</a>.</em></p> <p>Also, you would need to define <code class="language-plaintext highlighter-rouge">model_infer_fn</code>, which takes the inputs (1 string and 1 float) and returns a string. A simple example would be:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> <td class="code"><pre><span class="n">model</span> <span class="o">=</span> <span class="nc">Model</span><span class="p">()</span>  <span class="c1"># some model you trained
</span>
<span class="k">def</span> <span class="nf">model_infer_fn</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">threshold</span><span class="p">):</span>
    <span class="n">pred</span> <span class="o">=</span> <span class="nf">model</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="sh">'</span><span class="s">positive</span><span class="sh">'</span> <span class="k">if</span> <span class="n">pred</span> <span class="o">&gt;=</span> <span class="n">treshold</span> <span class="k">else</span> <span class="sh">'</span><span class="s">negative</span><span class="sh">'</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>For me, I like to create a <code class="language-plaintext highlighter-rouge">ModelInterface</code> class for this:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td> <td class="code"><pre><span class="k">class</span> <span class="nc">ModelInterface</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">model</span> <span class="o">=</span> <span class="nc">ModelClass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">infer</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">model</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

        <span class="c1"># process output: text, image, plot, etc.
</span>        <span class="n">output</span> <span class="o">=</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span> <span class="nf">interpret</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        returns the contribution of each input component.
        </span><span class="sh">"""</span>
        <span class="k">pass</span>

<span class="bp">...</span>
<span class="n">model</span> <span class="o">=</span> <span class="nc">ModelInterface</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">model_name</span><span class="p">)</span>
<span class="n">iface</span> <span class="o">=</span> <span class="n">gr</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span>
           <span class="n">fn</span><span class="o">=</span><span class="n">model</span><span class="p">.</span><span class="n">infer</span><span class="p">,</span>
<span class="bp">...</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>Putting the <code class="language-plaintext highlighter-rouge">gr.Interface</code> in the main function and <code class="language-plaintext highlighter-rouge">ModelInterface</code> together, the <code class="language-plaintext highlighter-rouge">serve.py</code> file would look something like this:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td> <td class="code"><pre> <span class="kn">import</span> <span class="n">argparse</span>

 <span class="kn">import</span> <span class="n">gradio</span> <span class="k">as</span> <span class="n">gr</span>

 <span class="c1"># your trained model class
</span> <span class="kn">from</span> <span class="n">models</span> <span class="kn">import</span> <span class="n">ModelClass</span>


 <span class="k">class</span> <span class="nc">ModelInterface</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">model</span> <span class="o">=</span> <span class="nc">ModelClass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">infer</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">model</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

        <span class="c1"># process output: text, image, plot, etc.
</span>        <span class="n">output</span> <span class="o">=</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span> <span class="nf">interpret</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        returns the contribution of each input component.
        </span><span class="sh">"""</span>
        <span class="k">pass</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="nc">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="p">.</span><span class="nf">add_argument</span><span class="p">(</span><span class="sh">"</span><span class="s">--model_name</span><span class="sh">"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="nf">parse_args</span><span class="p">()</span>
    <span class="n">model</span> <span class="o">=</span> <span class="nc">ModelInterface</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">model_name</span><span class="p">)</span>

    <span class="n">iface</span> <span class="o">=</span> <span class="n">gr</span><span class="p">.</span><span class="nc">Interface</span><span class="p">(</span>
        <span class="n">fn</span><span class="o">=</span><span class="n">model</span><span class="p">.</span><span class="n">infer</span><span class="p">,</span>
        <span class="n">inputs</span><span class="o">=</span><span class="p">[</span>
            <span class="n">gr</span><span class="p">.</span><span class="nc">Textbox</span><span class="p">(</span><span class="n">lines</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="sh">"</span><span class="s">text here...</span><span class="sh">"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">sentence</span><span class="sh">'</span><span class="p">),</span>
            <span class="n">gr</span><span class="p">.</span><span class="nc">Slider</span><span class="p">(</span><span class="n">minimum</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                             <span class="n">maximum</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                             <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                             <span class="n">default</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                             <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">threshold</span><span class="sh">'</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="n">outputs</span><span class="o">=</span><span class="p">[</span>
            <span class="n">gr</span><span class="p">.</span><span class="nc">Textbox</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="sh">"</span><span class="s">auto</span><span class="sh">"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">prediction</span><span class="sh">"</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Demo</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">theme</span><span class="o">=</span><span class="sh">'</span><span class="s">peach</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">interpretation</span><span class="o">=</span><span class="n">model</span><span class="p">.</span><span class="n">interpret</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">iface</span><span class="p">.</span><span class="nf">launch</span><span class="p">(</span><span class="n">server_name</span><span class="o">=</span><span class="sh">"</span><span class="s">0.0.0.0</span><span class="sh">"</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>
</pre></td> </tr></tbody></table></code></pre></figure> <h2 id="step-2-dockerize">Step 2. Dockerize</h2> <p>AINize works with Dockerized repositories, and finds entry point from the repository’s <code class="language-plaintext highlighter-rouge">DOCKERFILE</code> in the root directory. We can setup the <code class="language-plaintext highlighter-rouge">DOCKERFILE</code> as follows:</p> <figure class="highlight"><pre><code class="language-docker" data-lang="docker"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td> <td class="code"><pre><span class="k">FROM</span><span class="s"> pytorch/pytorch:1.8.1-cuda10.2-cudnn7-devel  # base docker image from docker hub</span>
<span class="k">RUN </span>pip <span class="nb">install </span>pip <span class="nt">--upgrade</span>
<span class="k">RUN </span>pip <span class="nb">install </span>gradio Jinja2  <span class="c"># install required packages</span>

<span class="c"># setup directory</span>
<span class="k">COPY</span><span class="s"> . /app</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="c"># gradio uses port 7860 by default</span>
<span class="k">EXPOSE</span><span class="s"> 7860</span>

<span class="c"># run the serve.py</span>
<span class="k">CMD</span><span class="s"> ["python", "serve.py"]</span>
</pre></td> </tr></tbody></table></code></pre></figure> <h2 id="step-3-deploy-to-ainize">Step 3. Deploy to AINize</h2> <p>Go to AINize dashboard.</p> <ol> <li>Copy and paste the url of your github repo to search bar.</li> <li>Select the branch for deployment.</li> <li>Wait until the setup is over.</li> <li>In the deployment dashboard, click the pencil button to edit environment variables and add 7860 to ports.</li> </ol> <p>Voila! You now have deployed your service to the web, with both the frontend demo and backend REST API setup!</p> </div> </article><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme="light",giscusAttributes={src:"https://giscus.app/client.js","data-repo":"syncdoth/syncdoth.github.io","data-repo-id":"MDEwOlJlcG9zaXRvcnkzNDYwMzEyNDQ=","data-category":"General","data-category-id":"DIC_kwDOFKAEjM4CUVdE","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> © Copyright 2023 Sehyun Choi. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: August 12, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>