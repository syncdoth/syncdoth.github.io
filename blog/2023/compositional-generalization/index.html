<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Compositional Generalization | Sehyun Choi</title> <meta name="author" content="Sehyun Choi"> <meta name="description" content="What is compositional generalization problem and why is this interesting?"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/syncdoth/jekyll-pygments-themes@master/onedark.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A7%91%F0%9F%8F%BB%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="syncdoth.github.io/blog/2023/compositional-generalization/"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Sehyun¬†</span>Choi</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/courseworks/">courseworks</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Compositional Generalization</h1> <p class="post-meta">July 11, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a> ¬† ¬∑ ¬† <a href="/blog/tag/nlp"> <i class="fas fa-hashtag fa-sm"></i> NLP</a> ¬† <a href="/blog/tag/lm"> <i class="fas fa-hashtag fa-sm"></i> LM</a> ¬† <a href="/blog/tag/ai"> <i class="fas fa-hashtag fa-sm"></i> AI</a> ¬† <a href="/blog/tag/ml"> <i class="fas fa-hashtag fa-sm"></i> ML</a> ¬† <a href="/blog/tag/deep-learning"> <i class="fas fa-hashtag fa-sm"></i> Deep-learning</a> ¬† ¬† ¬∑ ¬† <a href="/blog/category/review"> <i class="fas fa-tag fa-sm"></i> Review</a> ¬† </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Compositional generalization has a quite long history. However, I would like to briefly review recent works that caught my eye, and how important they are.</p> <h2 id="what-is-it">What is it?</h2> <p>Compositional Generalization is about <em>can AI models generalize using different</em> <em>sub-knowledge in a compositional way to solve a more complex task?</em> A simple example from the well-known benchmark <a href="https://arxiv.org/abs/1711.00350" rel="external nofollow noopener" target="_blank">SCAN</a> is: ‚ÄúIf you know <code class="language-plaintext highlighter-rouge">JUMP</code>, <code class="language-plaintext highlighter-rouge">WALK</code>, and <code class="language-plaintext highlighter-rouge">WALK TWICE</code>, you should be able to understand <code class="language-plaintext highlighter-rouge">JUMP TWICE</code>.‚Äù Conventional Seq2seq methods (as of 2020, uni-RNN, bi-RNN, Transformers) all failed dramatically in this task.</p> <h2 id="why-is-it-important">Why is it important?</h2> <p>Compositional generalization can be interpreted or is related to a lot of different fields, such as OOD robustness (generalization direction), disentaglement (compositional direction), logical reasoning, or distantly, transfer learning. Since each of them has shown remarkable successes in different fields, I think this task has not been as hot as it could be. Moreover, one of the ‚Äúemergent abilities‚Äù of LLMs include showing traces of some level of compositional generalization ability, such as being able to translate from language A -&gt; B when it has been only trained on A -&gt; C and C -&gt; B / B -&gt; C pairs (forgot the source, will update üòÖ).</p> <p>However, it is still an important task because it is what makes the AI reach human level reasoning. As Noam Chomsky puts it, human language has ‚Äúinfinite uses of finite means.‚Äù Humans compose finite set of meanings, tools, functions, etc. into infinite possibilities, which makes us creative.</p> <h2 id="does-current-llm-has-it">Does Current LLM has it?</h2> <p>This is extensively explored by a recent UW paper: <a href="https://arxiv.org/abs/2305.18654" rel="external nofollow noopener" target="_blank">Faith and Fate: Limits of Transformer Compositionality</a>. The short answer is: No.</p> <h2 id="can-neural-networks-do-it">Can Neural Networks do it?</h2> <p>Yes and No. Some works such as LANE solve the SCAN generalization task to 100% accuracy. However, <a href="https://arxiv.org/abs/2307.03381" rel="external nofollow noopener" target="_blank">Teaching Arithmentics to Small Transformers</a> shows that it fails to generalize for arithmetic in longer digits. <a href="https://arxiv.org/abs/2305.18654" rel="external nofollow noopener" target="_blank">Faith and Fate: Limits of Transformer Compositionality</a> also shows that as the reasoning chain gets wider and deeper, Transformers (or similar auto-regressive sequence models) is likely to fail.</p> <h3 id="rwkv-4-demo">RWKV-4 Demo</h3> <p>A recent <a href="https://twitter.com/BlinkDL_AI/status/1677593798531223552?s=20" rel="external nofollow noopener" target="_blank">tweet</a> from BlinkDL (developer of RWKV, a very cool project that builds 100% RNN-based LM!) showed that a small RWKV model can solve high-digit arithmetics, trained similarly (with reversed digit tricks) as in <a href="https://arxiv.org/abs/2307.03381" rel="external nofollow noopener" target="_blank">Teaching Arithmentics to Small Transformers</a>.</p> <p>I ran a quick experiment on it: (code <a href="https://t.co/7HXdo9Tulw" rel="external nofollow noopener" target="_blank">link</a>) can this generalize to longer digits? The findings suggest <strong>NO</strong>.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/RWKV_math_10x10-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/RWKV_math_10x10-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/RWKV_math_10x10-1400.webp"></source> <img src="/assets/img/RWKV_math_10x10.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> RWKV-4Neo 2.9M model, trained from scratch by BlinkDL (maintainer), evaluated by me. Used 100 random examples per each k1 digits x k2 digits. </div> <h2 id="what-do-we-need-compositional-generalization">What do we need compositional generalization?</h2> <p>We don‚Äôt know it for sure yet. But, we know that simple MLE + Seq2Seq is not going to cut it. Either we need some auxiliary tasks, different loss, or different modules.</p> <h3 id="must-read">Must Read:</h3> <ul> <li><a href="https://arxiv.org/abs/2305.18654" rel="external nofollow noopener" target="_blank">Faith and Fate: Limits of Transformer Compositionality</a></li> <li><a href="https://arxiv.org/abs/2307.03381" rel="external nofollow noopener" target="_blank">Teaching Arithmentics to Small Transformers</a></li> <li><a href="https://github.com/BlinkDL/RWKV-LM/tree/main/RWKV-v4neo/math_demo" rel="external nofollow noopener" target="_blank">RWKV Math Demo</a></li> </ul> </div> </article><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme="light",giscusAttributes={src:"https://giscus.app/client.js","data-repo":"syncdoth/syncdoth.github.io","data-repo-id":"MDEwOlJlcG9zaXRvcnkzNDYwMzEyNDQ=","data-category":"General","data-category-id":"DIC_kwDOFKAEjM4CUVdE","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> ¬© Copyright 2023 Sehyun Choi. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: October 16, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>